# Tallow Relay Server Configuration
# Production configuration with stricter settings

server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 60s
  max_header_bytes: 1048576  # 1MB
  shutdown_timeout: 60s

room:
  max_rooms: 50000
  default_expiry: 24h
  max_expiry: 24h  # Reduced for production
  cleanup_interval: 1m
  code_word_count: 3

rate_limit:
  enabled: true
  requests_per_second: 5  # Stricter for production
  burst_size: 10
  cleanup_interval: 5m
  ban_duration: 24h  # Longer ban in production
  max_violations: 3

bridge:
  buffer_size: 65536  # 64KB for better throughput
  max_message_size: 67108864  # 64MB
  read_deadline: 60s
  write_deadline: 30s
  ping_interval: 30s
  pong_timeout: 10s
  max_bytes_per_room: 10737418240  # 10GB
  idle_timeout: 2m  # Shorter idle timeout in production

tls:
  enabled: true
  cert_file: "/etc/tallow-relay/tls/cert.pem"
  key_file: "/etc/tallow-relay/tls/key.pem"
  auto_tls: false

metrics:
  enabled: true
  path: "/metrics"
  health_path: "/health"
  ready_path: "/ready"
  port: 9090
  namespace: "tallow_relay"
