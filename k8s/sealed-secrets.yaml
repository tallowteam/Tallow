# Tallow Sealed Secrets Template
#
# HOW TO USE:
# 1. First, install the Sealed Secrets controller:
#    kubectl apply -f sealed-secrets-controller.yaml
#
# 2. Install kubeseal CLI:
#    - macOS: brew install kubeseal
#    - Linux: wget https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.25.0/kubeseal-0.25.0-linux-amd64.tar.gz
#
# 3. Create your regular secret file (DO NOT commit this):
#
#    apiVersion: v1
#    kind: Secret
#    metadata:
#      name: tallow-secrets
#      namespace: tallow
#    type: Opaque
#    stringData:
#      resend-api-key: "re_xxxxxxxxxxxx"
#      stripe-secret-key: "sk_live_xxxxxxxxxxxx"
#      stripe-webhook-secret: "whsec_xxxxxxxxxxxx"
#      stripe-publishable-key: "pk_live_xxxxxxxxxxxx"
#      turn-username: "your-turn-username"
#      turn-credential: "your-turn-credential"
#      redis-password: "your-redis-password"
#      metrics-token: "your-metrics-token"
#
# 4. Seal the secret (this creates the encrypted version):
#    kubeseal --format yaml < secret.yaml > k8s/sealed-secrets.yaml
#
# 5. The sealed secret below can be safely committed to git.
#    Only the controller in your cluster can decrypt it.
#
# 6. Apply the sealed secret:
#    kubectl apply -f k8s/sealed-secrets.yaml
#
# The controller will automatically create the actual Secret from this SealedSecret.

---
# TEMPLATE - Replace with output from kubeseal command
# This is a placeholder showing the structure of a SealedSecret
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: tallow-secrets
  namespace: tallow
  annotations:
    sealedsecrets.bitnami.com/cluster-wide: "false"
spec:
  encryptedData:
    # These values are encrypted and can only be decrypted by the controller
    # Run kubeseal to generate real encrypted values
    resend-api-key: AgBy8hDN... # Encrypted value placeholder
    stripe-secret-key: AgCK9jEM... # Encrypted value placeholder
    stripe-webhook-secret: AgDL0kFN... # Encrypted value placeholder
    stripe-publishable-key: AgEM1lGO... # Encrypted value placeholder
    turn-username: AgFN2mHP... # Encrypted value placeholder
    turn-credential: AgGO3nIQ... # Encrypted value placeholder
    redis-password: AgHP4oJR... # Encrypted value placeholder
    metrics-token: AgIQ5pKS... # Encrypted value placeholder
  template:
    metadata:
      name: tallow-secrets
      namespace: tallow
      labels:
        app: tallow
        app.kubernetes.io/name: tallow
        app.kubernetes.io/component: secrets
    type: Opaque
