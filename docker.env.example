# ============================================================================
# Tallow Docker Environment Configuration
# Copy this file to .env and adjust values for your deployment
# ============================================================================

# ============================================================================
# Node.js / Next.js Configuration
# ============================================================================
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1
PORT=3000
HOSTNAME=0.0.0.0

# ============================================================================
# Signaling/Relay Server Configuration
# ============================================================================
NEXT_PUBLIC_SIGNALING_URL=ws://signaling:3001
NEXT_PUBLIC_FORCE_RELAY=true
NEXT_PUBLIC_ALLOW_DIRECT=false

# Relay server settings
RELAY_ROLE=any
RELAY_REGION=us-west

# ============================================================================
# TURN Server Configuration (Optional)
# ============================================================================
# Uncomment and configure if using a TURN server for NAT traversal
# NEXT_PUBLIC_TURN_SERVER=stun:turn.example.com:3478
# NEXT_PUBLIC_TURN_USERNAME=tallow
# NEXT_PUBLIC_TURN_CREDENTIAL=change-me-to-secure-password

# ============================================================================
# Email Configuration (Resend)
# ============================================================================
# Get API key from https://resend.com
RESEND_API_KEY=
RESEND_FROM_EMAIL=Tallow <noreply@tallow.app>

# ============================================================================
# AWS S3 Configuration
# ============================================================================
# For file storage and CDN
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=tallow-files

# ============================================================================
# Stripe Configuration
# ============================================================================
# Get keys from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# ============================================================================
# Security Configuration
# ============================================================================
API_SECRET_KEY=generate-a-secure-random-string-here
ALLOWED_ORIGINS=https://tallow.app,https://www.tallow.app

# ============================================================================
# Feature Flags (LaunchDarkly)
# ============================================================================
# Optional: For feature flag management
NEXT_PUBLIC_LAUNCHDARKLY_CLIENT_ID=

# ============================================================================
# Analytics & Monitoring
# ============================================================================
# Sentry - Error tracking
NEXT_PUBLIC_SENTRY_DSN=

# Plausible - Privacy-focused analytics
NEXT_PUBLIC_PLAUSIBLE_DOMAIN=
NEXT_PUBLIC_PLAUSIBLE_HOST=https://plausible.io

# ============================================================================
# Synology NAS Specific Configuration
# ============================================================================
# Volume paths on Synology NAS
# Adjust based on your NAS configuration
DATA_VOLUME_PATH=/volume1/docker/tallow/data
RELAY_DATA_PATH=/volume1/docker/tallow/relay-data
CACHE_VOLUME_PATH=/volume1/docker/tallow/cache

# Docker resource limits for Synology
# Reduce these values if your NAS has limited resources
TALLOW_CPU_LIMIT=1.5
TALLOW_MEMORY_LIMIT=1.5G
SIGNALING_CPU_LIMIT=0.5
SIGNALING_MEMORY_LIMIT=256M

# ============================================================================
# CloudFlare Tunnel Configuration (Optional)
# ============================================================================
# For exposing local deployment to the internet via CloudFlare
# CLOUDFLARE_TUNNEL_TOKEN=

# ============================================================================
# Development/Debug Configuration
# ============================================================================
# Uncomment for development/debugging
# DEBUG=tallow:*
# LOG_LEVEL=debug
# NODE_OPTIONS=--inspect=0.0.0.0:9229

# ============================================================================
# Advanced Configuration
# ============================================================================
# Maximum old space size for Node.js (in MB)
NODE_OPTIONS=--max-old-space-size=2048

# Build arguments
NEXT_TELEMETRY_DISABLED=1

# ============================================================================
# Local Development Only (NOT for production)
# ============================================================================
# Uncomment these for local development
# NODE_ENV=development
# NEXT_PUBLIC_FORCE_RELAY=false
# NEXT_PUBLIC_ALLOW_DIRECT=true
