
> tallow@0.1.0 test:unit
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/aamir/Documents/Apps/Tallow[39m

 [32mâœ“[39m tests/unit/transfer/transfer-mode-integration.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 50[2mms[22m[39m
[2m12:31:51 AM[22m [33m[1m[vite][22m[39m [33m[2m(client)[22m[39m [33mwarning: [33mDuplicate member "isValidGroupLeft" in class body[33m
374 |       * Type guard for group left data
375 |       */
376 |      private isValidGroupLeft(data: unknown): data is { peerId: string; socketId: string } {
    |              ^
377 |          return (
378 |              typeof data === 'object' &&
[39m
  Plugin: [35mvite:esbuild[39m
  File: [36mC:/Users/aamir/Documents/Apps/Tallow/lib/signaling/socket-signaling.ts[39m
 [31mâ¯[39m tests/unit/crypto/sparse-pq-ratchet.test.ts [2m([22m[2m33 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 614[2mms[22m[39m
       [32mâœ“[39m should initialize as initiator[32m 24[2mms[22m[39m
       [32mâœ“[39m should initialize as responder[32m 9[2mms[22m[39m
       [32mâœ“[39m should initialize with peer public key[32m 16[2mms[22m[39m
       [32mâœ“[39m should derive initial epoch secret[32m 9[2mms[22m[39m
[31m       [31mÃ—[31m should generate hybrid keypair[39m[32m 24[2mms[22m[39m
       [32mâœ“[39m should return current epoch info[32m 10[2mms[22m[39m
       [32mâœ“[39m should track message count[32m 15[2mms[22m[39m
       [32mâœ“[39m should track epoch age[32m 116[2mms[22m[39m
[31m       [31mÃ—[31m should get public key[39m[32m 8[2mms[22m[39m
       [32mâœ“[39m should set peer public key[32m 16[2mms[22m[39m
[31m       [31mÃ—[31m should return same public key on multiple calls[39m[32m 8[2mms[22m[39m
       [32mâœ“[39m should advance epoch after message threshold[32m 16[2mms[22m[39m
       [32mâœ“[39m should advance epoch after time threshold[32m 12[2mms[22m[39m
[31m       [31mÃ—[31m should not advance epoch before thresholds[39m[32m 21[2mms[22m[39m
       [32mâœ“[39m should initiate epoch advancement with KEM[32m 33[2mms[22m[39m
[31m       [31mÃ—[31m should alternate epoch advancement between initiator and responder[39m[32m 40[2mms[22m[39m
       [32mâœ“[39m should prepare send with message key[32m 7[2mms[22m[39m
       [32mâœ“[39m should increment message number[32m 8[2mms[22m[39m
       [32mâœ“[39m should derive different message keys[32m 8[2mms[22m[39m
       [32mâœ“[39m should include KEM ciphertext when advancing epoch[32m 33[2mms[22m[39m
       [32mâœ“[39m should process received message[32m 23[2mms[22m[39m
       [32mâœ“[39m should process message with KEM ciphertext[32m 31[2mms[22m[39m
       [32mâœ“[39m should handle out-of-order messages[32m 16[2mms[22m[39m
[31m       [31mÃ—[31m should derive different epoch secrets[39m[32m 14[2mms[22m[39m
       [32mâœ“[39m should provide forward secrecy[32m 9[2mms[22m[39m
       [32mâœ“[39m should handle epoch wrapping[32m 7[2mms[22m[39m
       [32mâœ“[39m should clean up on destroy[32m 7[2mms[22m[39m
       [32mâœ“[39m should wipe secrets on destroy[32m 10[2mms[22m[39m
       [32mâœ“[39m should handle rapid message generation[32m 12[2mms[22m[39m
       [32mâœ“[39m should handle very long epoch[32m 8[2mms[22m[39m
       [32mâœ“[39m should handle missing peer public key gracefully[32m 9[2mms[22m[39m
       [32mâœ“[39m should prepare messages efficiently[32m 12[2mms[22m[39m
       [32mâœ“[39m should process received messages efficiently[32m 13[2mms[22m[39m
 [31mâ¯[39m tests/unit/transfer/group-transfer-manager.test.ts [2m([22m[2m19 tests[22m[2m | [22m[31m19 failed[39m[2m)[22m[32m 112[2mms[22m[39m
[31m       [31mÃ—[31m should initialize transfer for all recipients[39m[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m should create PQCTransferManager for each recipient[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should set bandwidth limit if provided[39m[32m 23[2mms[22m[39m
[31m       [31mÃ—[31m should handle individual recipient initialization failure[39m[32m 6[2mms[22m[39m
[31m       [31mÃ—[31m should start key exchange with all recipients[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should wait for data channel to open[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should handle key exchange failures gracefully[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should send file to all recipients in parallel[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should track progress during transfer[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should handle partial failures[39m[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should call completion callback[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should reject empty files[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should update state to completed when all succeed[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should update state to partial when some fail[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should update state to failed when all fail[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should cleanup all recipient managers[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should call destroy on all managers[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should apply bandwidth limit to each recipient[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should calculate overall progress correctly[39m[32m 14[2mms[22m[39m
 [31mâ¯[39m tests/unit/crypto/key-management.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 960[2mms[22m[39m
       [32mâœ“[39m should generate valid session keys[32m 26[2mms[22m[39m
       [32mâœ“[39m should generate unique key IDs[32m 43[2mms[22m[39m
       [32mâœ“[39m should set custom lifetime[32m 10[2mms[22m[39m
       [32mâœ“[39m should schedule automatic key deletion[32m 12[2mms[22m[39m
       [32mâœ“[39m should handle multiple session keys[32m 63[2mms[22m[39m
       [32mâœ“[39m should retrieve existing session key[32m 8[2mms[22m[39m
       [32mâœ“[39m should return null for non-existent key[32m 1[2mms[22m[39m
       [32mâœ“[39m should return null for expired key[32m 8[2mms[22m[39m
       [32mâœ“[39m should auto-delete expired key on retrieval[32m 9[2mms[22m[39m
       [32mâœ“[39m should increment message count[32m 8[2mms[22m[39m
       [32mâœ“[39m should signal ratchet when max messages reached[32m 8[2mms[22m[39m
       [32mâœ“[39m should return true for non-existent key[32m 1[2mms[22m[39m
       [32mâœ“[39m should delete existing key[32m 8[2mms[22m[39m
       [32mâœ“[39m should return false when deleting non-existent key[32m 1[2mms[22m[39m
       [32mâœ“[39m should cancel deletion timer[32m 10[2mms[22m[39m
       [32mâœ“[39m should securely wipe key material[32m 8[2mms[22m[39m
       [32mâœ“[39m should initialize ratchet state[32m 15[2mms[22m[39m
       [32mâœ“[39m should derive different chain keys for initiator and responder[32m 26[2mms[22m[39m
       [32mâœ“[39m should get next send key[32m 23[2mms[22m[39m
       [32mâœ“[39m should get receive key for current message[32m 9[2mms[22m[39m
[31m       [31mÃ—[31m should handle out-of-order messages[39m[32m 31[2mms[22m[39m
[31m       [31mÃ—[31m should retrieve skipped message key[39m[32m 10[2mms[22m[39m
       [32mâœ“[39m should throw error for non-existent session[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should get current public key[39m[32m 9[2mms[22m[39m
       [32mâœ“[39m should return null for non-existent session public key[32m 1[2mms[22m[39m
       [32mâœ“[39m should ratchet chain key forward[32m 1[2mms[22m[39m
       [32mâœ“[39m should produce deterministic ratchets[32m 1[2mms[22m[39m
       [32mâœ“[39m should create ratchet chain[32m 2[2mms[22m[39m
       [32mâœ“[39m should securely delete single key[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle empty array[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle null/undefined[32m 1[2mms[22m[39m
       [32mâœ“[39m should wipe multiple passes[32m 3[2mms[22m[39m
       [32mâœ“[39m should destroy session and all keys[32m 10[2mms[22m[39m
       [32mâœ“[39m should wipe ratchet state securely[32m 11[2mms[22m[39m
       [32mâœ“[39m should destroy all sessions[32m 54[2mms[22m[39m
       [32mâœ“[39m should return accurate statistics[32m 27[2mms[22m[39m
[31m       [31mÃ—[31m should track skipped keys[39m[32m 11[2mms[22m[39m
       [32mâœ“[39m should return same instance[32m 1[2mms[22m[39m
       [32mâœ“[39m should share state between getInstance calls[32m 9[2mms[22m[39m
       [32mâœ“[39m should handle rapid key generation[32m 144[2mms[22m[39m
       [32mâœ“[39m should limit skipped keys to MAX_SKIP[32m 247[2mms[22m[39m
       [32mâœ“[39m should handle timer cleanup on destroy[32m 7[2mms[22m[39m
       [32mâœ“[39m should handle DH ratchet step[32m 53[2mms[22m[39m
       [32mâœ“[39m should cleanup expired keys periodically[32m 17[2mms[22m[39m
 [31mâ¯[39m tests/unit/crypto/peer-authentication.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 1729[2mms[22m[39m
       [32mâœ“[39m should generate valid SAS from shared secret[32m 11[2mms[22m[39m
       [32mâœ“[39m should generate deterministic SAS[32m 4[2mms[22m[39m
       [32mâœ“[39m should generate different SAS for different secrets[32m 2[2mms[22m[39m
       [32mâœ“[39m should generate SAS with session binding[32m 2[2mms[22m[39m
       [32mâœ“[39m should produce same SAS with same session ID[32m 1[2mms[22m[39m
       [32mâœ“[39m should generate phrase with 3 words separated by hyphens[32m 2[2mms[22m[39m
       [32mâœ“[39m should generate words array matching phrase[32m 1[2mms[22m[39m
       [32mâœ“[39m should generate valid hex hash[32m 1[2mms[22m[39m
       [32mâœ“[39m should include recent timestamp[32m 1[2mms[22m[39m
       [32mâœ“[39m should verify matching SAS[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject non-matching SAS[32m 1[2mms[22m[39m
       [32mâœ“[39m should use constant-time comparison[32m 1[2mms[22m[39m
       [32mâœ“[39m should verify with session-bound SAS[32m 1[2mms[22m[39m
       [32mâœ“[39m should generate 6-digit numeric SAS[32m 1[2mms[22m[39m
       [32mâœ“[39m should generate deterministic numeric SAS[32m 1[2mms[22m[39m
       [32mâœ“[39m should generate different numeric SAS for different secrets[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should pad with zeros[39m[32m 21[2mms[22m[39m
[31m       [31mÃ—[31m should handle edge case with zero bytes[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should format SAS with emojis[32m 1[2mms[22m[39m
       [32mâœ“[39m should include emojis in formatted output[32m 1[2mms[22m[39m
       [32mâœ“[39m should separate words with double space[32m 1[2mms[22m[39m
       [32mâœ“[39m should create verification session[32m 3[2mms[22m[39m
       [32mâœ“[39m should generate unique session IDs[32m 1[2mms[22m[39m
       [32mâœ“[39m should mark session as verified[32m 119[2mms[22m[39m
       [32mâœ“[39m should mark session as failed[32m 120[2mms[22m[39m
       [32mâœ“[39m should mark session as skipped[32m 108[2mms[22m[39m
[31m       [31mÃ—[31m should check if peer is verified[39m[32m 115[2mms[22m[39m
       [32mâœ“[39m should get verification for peer[32m 231[2mms[22m[39m
       [32mâœ“[39m should return null for unverified peer[32m 1[2mms[22m[39m
       [32mâœ“[39m should get all verification sessions[32m 111[2mms[22m[39m
       [32mâœ“[39m should save and load session[32m 106[2mms[22m[39m
       [32mâœ“[39m should update existing session[32m 233[2mms[22m[39m
       [33m[2mâœ“[22m[39m should limit stored sessions to 50 [33m 487[2mms[22m[39m
       [32mâœ“[39m should initialize cache on startup[32m 0[2mms[22m[39m
       [32mâœ“[39m should only initialize cache once[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle server-side rendering[32m 3[2mms[22m[39m
       [32mâœ“[39m should handle empty shared secret[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle very large shared secret[32m 2[2mms[22m[39m
       [32mâœ“[39m should handle concurrent session creation[32m 5[2mms[22m[39m
       [32mâœ“[39m should handle marking non-existent session[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle corrupted SAS data[32m 2[2mms[22m[39m
       [32mâœ“[39m should produce different SAS for similar but different secrets[32m 1[2mms[22m[39m
       [32mâœ“[39m should not expose raw shared secret in SAS[32m 1[2mms[22m[39m
       [32mâœ“[39m should provide high entropy in word selection[32m 14[2mms[22m[39m
 [31mâ¯[39m tests/unit/crypto/triple-ratchet.test.ts [2m([22m[2m25 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 1949[2mms[22m[39m
       [32mâœ“[39m should initialize as initiator[32m 31[2mms[22m[39m
       [32mâœ“[39m should initialize as responder[32m 18[2mms[22m[39m
[31m       [31mÃ—[31m should generate public keys on initialization[39m[32m 36[2mms[22m[39m
       [32mâœ“[39m should initialize with peer keys[32m 36[2mms[22m[39m
       [32mâœ“[39m should get public keys[32m 15[2mms[22m[39m
       [32mâœ“[39m should set peer public keys[32m 37[2mms[22m[39m
       [32mâœ“[39m should encrypt and decrypt message[32m 111[2mms[22m[39m
[31m       [31mÃ—[31m should handle multiple messages[39m[32m 118[2mms[22m[39m
[31m       [31mÃ—[31m should increment message numbers[39m[32m 100[2mms[22m[39m
       [32mâœ“[39m should encrypt different plaintexts to different ciphertexts[32m 73[2mms[22m[39m
       [32mâœ“[39m should encrypt same plaintext to different ciphertexts[32m 81[2mms[22m[39m
[31m       [31mÃ—[31m should handle out-of-order message delivery[39m[32m 111[2mms[22m[39m
[31m       [31mÃ—[31m should store skipped message keys[39m[32m 135[2mms[22m[39m
[31m       [31mÃ—[31m should handle bidirectional message exchange[39m[32m 110[2mms[22m[39m
       [32mâœ“[39m should return session info[32m 14[2mms[22m[39m
[31m       [31mÃ—[31m should update message number in info[39m[32m 77[2mms[22m[39m
       [32mâœ“[39m should destroy session and wipe keys[32m 14[2mms[22m[39m
       [32mâœ“[39m should wipe keys after encryption[32m 57[2mms[22m[39m
       [32mâœ“[39m should handle invalid ciphertext[32m 16[2mms[22m[39m
       [32mâœ“[39m should handle tampered ciphertext[32m 59[2mms[22m[39m
[31m       [31mÃ—[31m should handle empty plaintext[39m[32m 51[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not decrypt old messages after key rotation [33m 465[2mms[22m[39m
[31m       [31mÃ—[31m should handle large messages[39m[32m 48[2mms[22m[39m
       [32mâœ“[39m should encrypt messages efficiently[32m 51[2mms[22m[39m
       [32mâœ“[39m should decrypt messages efficiently[32m 70[2mms[22m[39m
[90mstderr[2m | tests/unit/metadata-stripper.test.ts[2m > [22m[2mMetadata Stripper - Error Handling[2m > [22m[2mshould handle corrupt files gracefully
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/metadata-stripper.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 77[2mms[22m[39m
[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mderiveRoomEncryptionKey[2m > [22m[2mshould derive different keys for different room codes
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mderiveRoomEncryptionKey[2m > [22m[2mshould derive different keys with and without password
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mdecryptRoomMessage[2m > [22m[2mshould reject tampered ciphertext
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mdecryptRoomMessage[2m > [22m[2mshould reject wrong IV
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mdecryptRoomMessage[2m > [22m[2mshould fail with wrong encryption key
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mReplay Protection[2m > [22m[2mshould reject expired messages
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mPassword Protection[2m > [22m[2mshould require correct password to decrypt
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mPassword Protection[2m > [22m[2mshould require password if message was encrypted with one
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/room-crypto.test.ts[2m > [22m[2mRoom Crypto[2m > [22m[2mMulti-Member Room Scenario[2m > [22m[2mshould prevent non-members from reading messages
[22m[39mAn error occurred

 [31mâ¯[39m tests/unit/contexts/notifications-context.test.tsx [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m tests/unit/room-crypto.test.ts [2m([22m[2m32 tests[22m[2m)[22m[33m 464[2mms[22m[39m
 [32mâœ“[39m tests/unit/media-capture.test.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 339[2mms[22m[39m
 [32mâœ“[39m tests/unit/device-converters.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [31mâ¯[39m tests/unit/privacy/metadata-stripper.test.ts [2m([22m[2m38 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 175[2mms[22m[39m
       [32mâœ“[39m should support JPEG images[32m 4[2mms[22m[39m
       [32mâœ“[39m should support PNG images[32m 1[2mms[22m[39m
       [32mâœ“[39m should support WebP images[32m 0[2mms[22m[39m
       [32mâœ“[39m should support HEIC/HEIF images[32m 1[2mms[22m[39m
       [32mâœ“[39m should support MP4 videos[32m 1[2mms[22m[39m
       [32mâœ“[39m should support QuickTime videos[32m 0[2mms[22m[39m
       [32mâœ“[39m should not support unsupported types[32m 1[2mms[22m[39m
       [32mâœ“[39m should extract GPS data[32m 3[2mms[22m[39m
       [32mâœ“[39m should extract device information[32m 1[2mms[22m[39m
       [32mâœ“[39m should extract timestamps[32m 1[2mms[22m[39m
       [32mâœ“[39m should extract dimensions[32m 1[2mms[22m[39m
       [32mâœ“[39m should detect sensitive data flag[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should strip EXIF data from JPEG[39m[32m 16[2mms[22m[39m
       [32mâœ“[39m should preserve image data[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should remove APP1 segment[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should handle JPEG without metadata[32m 1[2mms[22m[39m
       [32mâœ“[39m should strip metadata from PNG[32m 1[2mms[22m[39m
       [32mâœ“[39m should preserve critical PNG chunks[32m 1[2mms[22m[39m
       [32mâœ“[39m should remove ancillary chunks[32m 1[2mms[22m[39m
       [32mâœ“[39m should strip metadata from MP4[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should remove user data boxes[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should handle video metadata errors gracefully[32m 1[2mms[22m[39m
       [32mâœ“[39m should process multiple files[32m 3[2mms[22m[39m
       [32mâœ“[39m should report progress during batch processing[32m 4[2mms[22m[39m
       [32mâœ“[39m should handle mixed success and failure[32m 1[2mms[22m[39m
       [32mâœ“[39m should work with FileSelectorWithPrivacy component[32m 1[2mms[22m[39m
       [32mâœ“[39m should preserve original file when stripping fails[32m 0[2mms[22m[39m
       [32mâœ“[39m should track which metadata was removed[32m 1[2mms[22m[39m
       [32mâœ“[39m should provide metadata summary[32m 2[2mms[22m[39m
       [32mâœ“[39m should handle files with no metadata[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle corrupted JPEG files[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle corrupted PNG files[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle empty files[32m 0[2mms[22m[39m
       [32mâœ“[39m should handle very large files[32m 101[2mms[22m[39m
       [32mâœ“[39m should strip metadata quickly for small files[32m 10[2mms[22m[39m
       [32mâœ“[39m should process batch efficiently[32m 2[2mms[22m[39m
       [32mâœ“[39m should export supported image types[32m 0[2mms[22m[39m
       [32mâœ“[39m should export supported video types[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/pq-signatures.test.ts [2m([22m[2m33 tests[22m[2m)[22m[33m 2401[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle large message [33m 669[2mms[22m[39m
[90mstderr[2m | components/features/feature-card.test.tsx[2m > [22m[2mFeatureCard[2m > [22m[2mCompact Variant[2m > [22m[2mrenders feature title and description
[22m[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

 [32mâœ“[39m tests/unit/security/credential-encryption.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [31mâ¯[39m components/features/feature-card.test.tsx [2m([22m[2m39 tests[22m[2m | [22m[31m29 failed[39m[2m)[22m[33m 1299[2mms[22m[39m
       [32mâœ“[39m renders feature title and description[32m 98[2mms[22m[39m
[31m       [31mÃ—[31m renders status badge when showStatus is true[39m[32m 43[2mms[22m[39m
[31m       [31mÃ—[31m does not render status badge when showStatus is false[39m[32m 13[2mms[22m[39m
[31m       [31mÃ—[31m calls onClick when card is clicked[39m[32m 35[2mms[22m[39m
[31m       [31mÃ—[31m handles keyboard navigation (Enter key)[39m[32m 19[2mms[22m[39m
[31m       [31mÃ—[31m handles keyboard navigation (Space key)[39m[32m 18[2mms[22m[39m
[31m       [31mÃ—[31m has proper ARIA label[39m[32m 25[2mms[22m[39m
[31m       [31mÃ—[31m is focusable with tabIndex[39m[32m 21[2mms[22m[39m
[31m       [31mÃ—[31m renders all feature information[39m[32m 48[2mms[22m[39m
[31m       [31mÃ—[31m renders technical specifications when showTechSpecs is true[39m[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m does not render tech specs when showTechSpecs is false[39m[32m 32[2mms[22m[39m
[31m       [31mÃ—[31m renders code example when showCodeExample is true[39m[32m 42[2mms[22m[39m
[31m       [31mÃ—[31m renders complexity badge[39m[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m renders tags[39m[32m 23[2mms[22m[39m
[31m       [31mÃ—[31m shows related features count[39m[32m 29[2mms[22m[39m
       [32mâœ“[39m renders action buttons for production features[32m 23[2mms[22m[39m
[31m       [31mÃ—[31m renders file location[39m[32m 38[2mms[22m[39m
[31m       [31mÃ—[31m Try Demo button calls onClick[39m[32m 44[2mms[22m[39m
[31m       [31mÃ—[31m View Docs button opens documentation link[39m[32m 33[2mms[22m[39m
[31m       [31mÃ—[31m shows Learn More button for features without demo or docs[39m[32m 32[2mms[22m[39m
[31m       [31mÃ—[31m renders production status with correct styling[39m[32m 35[2mms[22m[39m
       [32mâœ“[39m renders beta status with correct styling[32m 25[2mms[22m[39m
       [32mâœ“[39m renders experimental status with correct styling[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m renders planned status with correct styling[39m[32m 29[2mms[22m[39m
       [32mâœ“[39m applies custom className[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m has proper role attribute[39m[32m 61[2mms[22m[39m
[31m       [31mÃ—[31m tech specs have list role[39m[32m 36[2mms[22m[39m
[31m       [31mÃ—[31m does not trigger click on other keys[39m[32m 67[2mms[22m[39m
[31m       [31mÃ—[31m handles feature without icon[39m[32m 35[2mms[22m[39m
[31m       [31mÃ—[31m handles feature without tech specs[39m[32m 35[2mms[22m[39m
[31m       [31mÃ—[31m handles feature without code examples[39m[32m 44[2mms[22m[39m
[31m       [31mÃ—[31m handles feature without tags[39m[32m 47[2mms[22m[39m
[31m       [31mÃ—[31m handles empty related features array[39m[32m 46[2mms[22m[39m
[31m     [31mÃ—[31m renders children in grid layout[39m[32m 43[2mms[22m[39m
     [32mâœ“[39m has proper list role[32m 5[2mms[22m[39m
     [32mâœ“[39m applies custom className[32m 6[2mms[22m[39m
     [32mâœ“[39m uses responsive grid classes[32m 5[2mms[22m[39m
     [32mâœ“[39m renders multiple cards in a grid[32m 32[2mms[22m[39m
     [32mâœ“[39m handles click events on multiple cards independently[32m 46[2mms[22m[39m
[90mstderr[2m | tests/unit/screen-sharing.test.ts[2m > [22m[2mScreenSharingManager[2m > [22m[2mstartSharing[2m > [22m[2mshould handle start failure
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/contexts/integration.test.tsx[2m > [22m[2mContext Integration[2m > [22m[2mSettings + Devices Integration[2m > [22m[2mshould use device name from settings
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/contexts/integration.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 694[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/password-protection.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m tests/unit/privacy/privacy-settings.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 181[2mms[22m[39m
 [31mâ¯[39m tests/unit/screen-sharing.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 2292[2mms[22m[39m
       [32mâœ“[39m should create manager with default config[32m 5[2mms[22m[39m
       [32mâœ“[39m should create manager with custom config[32m 1[2mms[22m[39m
       [32mâœ“[39m should start screen sharing successfully[32m 3[2mms[22m[39m
       [32mâœ“[39m should add tracks to peer connection[32m 6[2mms[22m[39m
       [32mâœ“[39m should handle start failure[32m 7[2mms[22m[39m
       [32mâœ“[39m should call state change callback[32m 4[2mms[22m[39m
       [32mâœ“[39m should stop screen sharing[32m 1[2mms[22m[39m
       [32mâœ“[39m should remove tracks from peer connection[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle stop when not sharing[32m 1[2mms[22m[39m
       [32mâœ“[39m should pause video track[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle pause when not sharing[32m 0[2mms[22m[39m
       [32mâœ“[39m should resume video track[32m 1[2mms[22m[39m
       [32mâœ“[39m should update quality preset[32m 1[2mms[22m[39m
       [32mâœ“[39m should update sender parameters[32m 1[2mms[22m[39m
       [32mâœ“[39m should update frame rate[32m 1[2mms[22m[39m
       [32mâœ“[39m should enable audio[32m 0[2mms[22m[39m
       [32mâœ“[39m should disable audio[32m 1[2mms[22m[39m
       [33m[2mâœ“[22m[39m should collect statistics [33m 1110[2mms[22m[39m
       [33m[2mâœ“[22m[39m should call stats callback [33m 1116[2mms[22m[39m
       [32mâœ“[39m should return current state[32m 1[2mms[22m[39m
       [32mâœ“[39m should return null when not sharing[32m 0[2mms[22m[39m
       [32mâœ“[39m should return stream when sharing[32m 1[2mms[22m[39m
       [32mâœ“[39m should clean up resources[32m 1[2mms[22m[39m
     [32mâœ“[39m should return true when supported[32m 0[2mms[22m[39m
     [32mâœ“[39m should return false when not supported[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should use correct resolution for 720p[39m[32m 16[2mms[22m[39m
     [32mâœ“[39m should use correct resolution for 1080p[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should use correct resolution for 4k[39m[32m 2[2mms[22m[39m
[31m     [31mÃ—[31m should set correct frame rate[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should include audio when enabled[39m[32m 2[2mms[22m[39m
     [32mâœ“[39m should exclude audio when disabled[32m 0[2mms[22m[39m
     [32mâœ“[39m should stop sharing when track ends[32m 0[2mms[22m[39m
 [31mâ¯[39m tests/unit/rooms/transfer-room-manager.test.ts [2m([22m[2m37 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 8591[2mms[22m[39m
       [32mâœ“[39m should connect to signaling server[32m 22[2mms[22m[39m
       [32mâœ“[39m should disconnect from signaling server[32m 1[2mms[22m[39m
       [32mâœ“[39m should create room with default config[32m 37[2mms[22m[39m
       [32mâœ“[39m should create room with custom config[32m 22[2mms[22m[39m
       [32mâœ“[39m should create room with never-expiring option[32m 31[2mms[22m[39m
       [32mâœ“[39m should generate unique room codes[32m 47[2mms[22m[39m
       [32mâœ“[39m should join existing room[32m 66[2mms[22m[39m
       [32mâœ“[39m should reject join with wrong password[32m 51[2mms[22m[39m
       [32mâœ“[39m should update member list on join[32m 35[2mms[22m[39m
       [32mâœ“[39m should get current room[32m 80[2mms[22m[39m
       [32mâœ“[39m should get room members[32m 35[2mms[22m[39m
       [32mâœ“[39m should identify room owner[32m 41[2mms[22m[39m
       [32mâœ“[39m should generate shareable URL[32m 36[2mms[22m[39m
       [32mâœ“[39m should broadcast file offer[32m 76[2mms[22m[39m
[31m       [31mÃ—[31m should throw when not in room[39m[32m 35[2mms[22m[39m
       [32mâœ“[39m should leave room[32m 11[2mms[22m[39m
       [32mâœ“[39m should close room as owner[32m 36[2mms[22m[39m
       [32mâœ“[39m should throw when non-owner tries to close[32m 38[2mms[22m[39m
       [32mâœ“[39m should register member joined callback[32m 33[2mms[22m[39m
       [32mâœ“[39m should register member left callback[32m 15[2mms[22m[39m
       [32mâœ“[39m should register file offer callback[32m 16[2mms[22m[39m
       [32mâœ“[39m should register room closed callback[32m 16[2mms[22m[39m
       [32mâœ“[39m should register members updated callback[32m 16[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle connection timeout [33m 5040[2mms[22m[39m
       [32mâœ“[39m should handle duplicate join attempts[32m 79[2mms[22m[39m
       [32mâœ“[39m should handle room expiration[32m 39[2mms[22m[39m
       [32mâœ“[39m should handle network disconnection[32m 11[2mms[22m[39m
       [32mâœ“[39m should handle full room[32m 60[2mms[22m[39m
       [33m[2mâœ“[22m[39m should generate cryptographically secure codes [33m 1553[2mms[22m[39m
       [32mâœ“[39m should validate room code format[32m 45[2mms[22m[39m
       [32mâœ“[39m should sanitize room names[32m 32[2mms[22m[39m
       [32mâœ“[39m should create room quickly[32m 38[2mms[22m[39m
       [32mâœ“[39m should handle multiple rooms[32m 292[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle rapid member joins [33m 600[2mms[22m[39m
     [32mâœ“[39m should generate 8-character codes[32m 0[2mms[22m[39m
     [32mâœ“[39m should use safe character set[32m 0[2mms[22m[39m
     [32mâœ“[39m should have sufficient entropy[32m 0[2mms[22m[39m
[90mstderr[2m | tests/unit/contexts/settings-context.test.tsx[2m > [22m[2mSettingsContext[2m > [22m[2mError Handling[2m > [22m[2mshould handle storage load errors
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/contexts/settings-context.test.tsx[2m > [22m[2mSettingsContext[2m > [22m[2mError Handling[2m > [22m[2mshould handle storage save errors
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/contexts/settings-context.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[33m 1590[2mms[22m[39m
 [32mâœ“[39m tests/unit/security/timing-safe.test.ts [2m([22m[2m39 tests[22m[2m)[22m[33m 602[2mms[22m[39m
 [31mâ¯[39m tests/unit/chat/chat-manager.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 352[2mms[22m[39m
       [32mâœ“[39m should initialize with DataChannel and session keys[32m 22[2mms[22m[39m
[31m       [31mÃ—[31m should reject initialization without DataChannel[39m[32m 22[2mms[22m[39m
       [32mâœ“[39m should send a text message[32m 10[2mms[22m[39m
       [32mâœ“[39m should reject empty messages[32m 6[2mms[22m[39m
       [32mâœ“[39m should reject messages exceeding max length[32m 11[2mms[22m[39m
       [32mâœ“[39m should support reply-to messages[32m 13[2mms[22m[39m
       [32mâœ“[39m should send a file attachment[32m 28[2mms[22m[39m
       [32mâœ“[39m should reject files exceeding size limit[32m 19[2mms[22m[39m
       [32mâœ“[39m should send typing indicator[32m 6[2mms[22m[39m
       [32mâœ“[39m should stop typing indicator[32m 23[2mms[22m[39m
       [32mâœ“[39m should mark messages as read[32m 17[2mms[22m[39m
       [32mâœ“[39m should handle incoming chat messages[32m 26[2mms[22m[39m
       [32mâœ“[39m should ignore non-chat messages[32m 3[2mms[22m[39m
       [32mâœ“[39m should handle typing indicators[32m 17[2mms[22m[39m
       [32mâœ“[39m should search messages[32m 7[2mms[22m[39m
       [32mâœ“[39m should export as JSON[32m 10[2mms[22m[39m
       [32mâœ“[39m should export as TXT[32m 11[2mms[22m[39m
       [32mâœ“[39m should add and trigger event listeners[32m 17[2mms[22m[39m
       [32mâœ“[39m should remove event listeners[32m 19[2mms[22m[39m
[31m       [31mÃ—[31m should edit a message[39m[32m 31[2mms[22m[39m
       [32mâœ“[39m should delete a message[32m 17[2mms[22m[39m
       [32mâœ“[39m should destroy properly[32m 7[2mms[22m[39m
[90mstderr[2m | tests/unit/pqc-signaling.test.ts[2m > [22m[2mPQC Signaling[2m > [22m[2mKey Encapsulation[2m > [22m[2mshould fail with wrong secret key
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/pqc-signaling.test.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 821[2mms[22m[39m
 [31mâ¯[39m components/features/technology-showcase.test.tsx [2m([22m[2m37 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[33m 3385[2mms[22m[39m
       [32mâœ“[39m renders without crashing[32m 182[2mms[22m[39m
[31m       [31mÃ—[31m renders default technologies when no props provided[39m[32m 113[2mms[22m[39m
[31m       [31mÃ—[31m renders section header with correct text[39m[32m 82[2mms[22m[39m
[31m       [31mÃ—[31m renders all default technology names[39m[32m 70[2mms[22m[39m
       [32mâœ“[39m renders custom technologies when provided[32m 54[2mms[22m[39m
[31m       [31mÃ—[31m renders large icons for each technology[39m[32m 82[2mms[22m[39m
[31m       [31mÃ—[31m renders 'Why This Matters' section for each card[39m[32m 64[2mms[22m[39m
[31m       [31mÃ—[31m renders learn more links for each technology[39m[32m 79[2mms[22m[39m
[31m       [31mÃ—[31m has proper ARIA labels on section[39m[32m 192[2mms[22m[39m
[31m       [31mÃ—[31m has proper heading structure[39m[32m 164[2mms[22m[39m
       [32mâœ“[39m has unique IDs for each technology title[32m 134[2mms[22m[39m
       [32mâœ“[39m has aria-hidden on decorative icons[32m 147[2mms[22m[39m
       [32mâœ“[39m has accessible learn more links[32m 195[2mms[22m[39m
[31m       [31mÃ—[31m CTA buttons have proper labels[39m[32m 102[2mms[22m[39m
       [32mâœ“[39m renders correct links for default technologies[32m 170[2mms[22m[39m
[31m       [31mÃ—[31m renders custom links when provided[39m[32m 215[2mms[22m[39m
[31m       [31mÃ—[31m CTA buttons link to correct pages[39m[32m 163[2mms[22m[39m
       [32mâœ“[39m applies custom className when provided[32m 51[2mms[22m[39m
       [32mâœ“[39m has responsive grid classes[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m applies card-feature styling to cards[39m[32m 28[2mms[22m[39m
       [32mâœ“[39m has proper spacing between grid items[32m 26[2mms[22m[39m
[31m       [31mÃ—[31m renders technology descriptions[39m[32m 235[2mms[22m[39m
[31m       [31mÃ—[31m renders why sections correctly[39m[32m 134[2mms[22m[39m
       [32mâœ“[39m displays icons with correct size classes[32m 25[2mms[22m[39m
[31m       [31mÃ—[31m renders CTA section with prompt text[39m[32m 105[2mms[22m[39m
       [32mâœ“[39m renders both CTA buttons[32m 128[2mms[22m[39m
[31m       [31mÃ—[31m CTA buttons have icons[39m[32m 232[2mms[22m[39m
       [32mâœ“[39m DEFAULT_TECHNOLOGIES has 3 items[32m 1[2mms[22m[39m
       [32mâœ“[39m each default technology has required fields[32m 2[2mms[22m[39m
       [32mâœ“[39m default technologies have unique IDs[32m 1[2mms[22m[39m
       [32mâœ“[39m default technologies include expected names[32m 2[2mms[22m[39m
       [32mâœ“[39m handles empty technologies array gracefully[32m 11[2mms[22m[39m
       [32mâœ“[39m each card has full height[32m 23[2mms[22m[39m
[31m       [31mÃ—[31m applies larger padding on desktop[39m[32m 37[2mms[22m[39m
       [32mâœ“[39m accepts Technology interface correctly[32m 43[2mms[22m[39m
       [32mâœ“[39m learn more links have hover effects[32m 35[2mms[22m[39m
       [32mâœ“[39m arrows have transition classes[32m 26[2mms[22m[39m
 [31mâ¯[39m tests/unit/email-fallback.test.ts [2m([22m[2m19 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 3019[2mms[22m[39m
       [32mâœ“[39m should upload and encrypt a file successfully[32m 71[2mms[22m[39m
       [32mâœ“[39m should reject empty files[32m 4[2mms[22m[39m
       [32mâœ“[39m should reject files over size limit[32m 212[2mms[22m[39m
[31m       [31mÃ—[31m should validate expiration hours[39m[32m 81[2mms[22m[39m
       [32mâœ“[39m should set correct expiration time[32m 29[2mms[22m[39m
       [32mâœ“[39m should download and decrypt file with valid token[32m 41[2mms[22m[39m
       [32mâœ“[39m should reject invalid token[32m 39[2mms[22m[39m
       [32mâœ“[39m should reject non-existent file[32m 1[2mms[22m[39m
       [32mâœ“[39m should enforce one-time download limit[32m 32[2mms[22m[39m
       [32mâœ“[39m should allow multiple downloads if configured[32m 17[2mms[22m[39m
[31m       [31mÃ—[31m should remove expired files[39m[32m 8[2mms[22m[39m
       [32mâœ“[39m should not remove non-expired files[32m 43[2mms[22m[39m
       [32mâœ“[39m should handle corrupted storage entries[32m 1[2mms[22m[39m
       [32mâœ“[39m should return correct statistics[32m 82[2mms[22m[39m
[31m       [31mÃ—[31m should count expired files[39m[32m 43[2mms[22m[39m
     [33m[2mâœ“[22m[39m should generate unique tokens [33m 2270[2mms[22m[39m
     [32mâœ“[39m should use constant-time comparison for tokens[32m 2[2mms[22m[39m
     [32mâœ“[39m should encrypt and decrypt file correctly[32m 11[2mms[22m[39m
     [32mâœ“[39m should preserve file metadata through encryption[32m 20[2mms[22m[39m
 [32mâœ“[39m tests/unit/context/transfers-context.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[32m 187[2mms[22m[39m
 [32mâœ“[39m tests/unit/security/key-rotation.test.ts [2m([22m[2m33 tests[22m[2m)[22m[33m 1378[2mms[22m[39m
       [33m[2mâœ“[22m[39m should rotate automatically at intervals [33m 1226[2mms[22m[39m
 [32mâœ“[39m tests/unit/media/screen-recording.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m tests/unit/security/memory-protection.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m tests/unit/resumable-transfer.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [31mâ¯[39m tests/unit/utils/cache-stats.test.ts [2m([22m[2m25 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 87[2mms[22m[39m
       [32mâœ“[39m should format 0 bytes[32m 4[2mms[22m[39m
       [32mâœ“[39m should format bytes[32m 1[2mms[22m[39m
       [32mâœ“[39m should format kilobytes[32m 1[2mms[22m[39m
       [32mâœ“[39m should format megabytes[32m 1[2mms[22m[39m
       [32mâœ“[39m should format gigabytes[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle decimal values[32m 1[2mms[22m[39m
       [32mâœ“[39m should return cache statistics[32m 15[2mms[22m[39m
[31m       [31mÃ—[31m should return empty array when caches API is not available[39m[32m 13[2mms[22m[39m
[31m       [31mÃ—[31m should handle errors gracefully[39m[32m 4[2mms[22m[39m
       [32mâœ“[39m should return cache items sorted by size[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m should return empty array when caches API is not available[39m[32m 3[2mms[22m[39m
       [32mâœ“[39m should clear a specific cache[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return false when caches API is not available[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should handle errors gracefully[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should clear all caches[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should return 0 when caches API is not available[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should count only successfully deleted caches[32m 1[2mms[22m[39m
       [32mâœ“[39m should return storage quota information[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should return null when storage API is not available[39m[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle zero quota[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should check if storage is persisted[39m[32m 11[2mms[22m[39m
[31m       [31mÃ—[31m should return false when storage API is not available[39m[32m 1[2mms[22m[39m
       [32mâœ“[39m should request persistent storage[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should return false when storage API is not available[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should handle user denial[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/privacy/secure-deletion.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m tests/unit/search/search-utils.test.ts [2m([22m[2m37 tests[22m[2m)[22m[33m 415[2mms[22m[39m
[90mstderr[2m | tests/unit/chat/chat-storage.test.ts[2m > [22m[2mChatStorage[2m > [22m[2mInitialization[2m > [22m[2mshould handle initialization errors
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/mobile-features.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [31mâ¯[39m tests/unit/chat/chat-storage.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 219[2mms[22m[39m
       [32mâœ“[39m should initialize successfully[32m 7[2mms[22m[39m
       [32mâœ“[39m should handle initialization errors[32m 8[2mms[22m[39m
       [32mâœ“[39m should save a message[32m 26[2mms[22m[39m
       [32mâœ“[39m should get a message by ID[32m 33[2mms[22m[39m
       [32mâœ“[39m should return null for non-existent message[32m 30[2mms[22m[39m
       [32mâœ“[39m should delete a message[32m 32[2mms[22m[39m
[31m       [31mÃ—[31m should get messages for session[39m[32m 31[2mms[22m[39m
[31m       [31mÃ—[31m should search messages[39m[32m 3[2mms[22m[39m
       [32mâœ“[39m should update message status[32m 28[2mms[22m[39m
[31m       [31mÃ—[31m should clear all messages[39m[32m 17[2mms[22m[39m
 [32mâœ“[39m tests/unit/transport/onion-routing.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 977[2mms[22m[39m
 [31mâ¯[39m tests/unit/validation/schemas.test.ts [2m([22m[2m36 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 84[2mms[22m[39m
       [32mâœ“[39m should validate correct email[32m 5[2mms[22m[39m
       [32mâœ“[39m should reject invalid email format[32m 2[2mms[22m[39m
       [32mâœ“[39m should reject email too short[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject email too long[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct name[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject empty name[32m 1[2mms[22m[39m
       [32mâœ“[39m should trim whitespace[32m 0[2mms[22m[39m
       [32mâœ“[39m should reject name too long[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct amount[32m 3[2mms[22m[39m
       [32mâœ“[39m should reject amount below minimum[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject amount above maximum[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject non-integer amount[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct share ID[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject share ID too short[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject share ID too long[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject invalid characters[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct file count[32m 0[2mms[22m[39m
       [32mâœ“[39m should reject zero files[32m 0[2mms[22m[39m
       [32mâœ“[39m should reject too many files[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct file size[32m 0[2mms[22m[39m
       [32mâœ“[39m should reject negative size[32m 0[2mms[22m[39m
       [32mâœ“[39m should reject size too large (> 4GB)[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct request[32m 3[2mms[22m[39m
       [32mâœ“[39m should reject missing email[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject missing name[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct request[32m 1[2mms[22m[39m
       [32mâœ“[39m should allow optional senderName[32m 0[2mms[22m[39m
       [32mâœ“[39m should reject invalid shareId[32m 1[2mms[22m[39m
       [32mâœ“[39m should validate correct request[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject invalid amount[32m 1[2mms[22m[39m
       [32mâœ“[39m should return success for valid data[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should return errors for invalid data[39m[32m 13[2mms[22m[39m
[31m       [31mÃ—[31m should format multiple errors[39m[32m 3[2mms[22m[39m
       [32mâœ“[39m should validate valid JSON body[32m 9[2mms[22m[39m
[31m       [31mÃ—[31m should return error response for invalid data[39m[32m 17[2mms[22m[39m
       [32mâœ“[39m should handle invalid JSON[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/utils/accessibility.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m tests/unit/components/device-list.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/pqc-crypto.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 288[2mms[22m[39m
 [31mâ¯[39m tests/unit/email/email-integration.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 34433[2mms[22m[39m
       [32mâœ“[39m should complete full cycle: upload â†’ store â†’ download[32m 22[2mms[22m[39m
       [32mâœ“[39m should handle multiple files in sequence[32m 32[2mms[22m[39m
       [32mâœ“[39m should enforce download limits correctly[32m 11[2mms[22m[39m
       [32mâœ“[39m should automatically cleanup expired files[32m 4[2mms[22m[39m
       [32mâœ“[39m should calculate correct expiration times[32m 2[2mms[22m[39m
       [32mâœ“[39m should generate unique download tokens[32m 103[2mms[22m[39m
       [32mâœ“[39m should reject empty files[32m 1[2mms[22m[39m
       [32mâœ“[39m should reject oversized files[32m 121[2mms[22m[39m
       [32mâœ“[39m should validate expiration hours[32m 9[2mms[22m[39m
       [32mâœ“[39m should reject invalid download tokens[32m 20[2mms[22m[39m
       [32mâœ“[39m should handle concurrent uploads[32m 18[2mms[22m[39m
       [32mâœ“[39m should handle concurrent downloads[32m 13[2mms[22m[39m
       [32mâœ“[39m should track storage statistics accurately[32m 18[2mms[22m[39m
       [32mâœ“[39m should cleanup all expired files in batch[32m 15[2mms[22m[39m
       [32mâœ“[39m should handle corrupted storage entries gracefully[32m 1[2mms[22m[39m
       [32mâœ“[39m should handle various file types[32m 71[2mms[22m[39m
       [32mâœ“[39m should preserve file metadata[32m 24[2mms[22m[39m
       [32mâœ“[39m should handle download of non-existent files[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should handle storage quota errors gracefully[39m[33m 33586[2mms[22m[39m
       [32mâœ“[39m should handle large number of files efficiently[32m 107[2mms[22m[39m
       [32mâœ“[39m should cleanup files efficiently[32m 245[2mms[22m[39m
 [32mâœ“[39m tests/unit/group-discovery.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 12224[2mms[22m[39m
       [33m[2mâœ“[22m[39m should discover group-transfer capable devices [33m 3032[2mms[22m[39m
       [33m[2mâœ“[22m[39m should filter devices by PQC requirement [33m 3039[2mms[22m[39m
       [33m[2mâœ“[22m[39m should respect min and max device limits [33m 3066[2mms[22m[39m
     [33m[2mâœ“[22m[39m should handle discovery errors gracefully [33m 3037[2mms[22m[39m
 [31mâ¯[39m components/features/use-case-grid.test.tsx [2m([22m[2m26 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 3105[2mms[22m[39m
       [32mâœ“[39m renders without crashing[32m 252[2mms[22m[39m
[31m       [31mÃ—[31m renders default use cases when no props provided[39m[32m 209[2mms[22m[39m
[31m       [31mÃ—[31m renders section header with correct text[39m[32m 269[2mms[22m[39m
[31m       [31mÃ—[31m renders all default use case personas[39m[32m 164[2mms[22m[39m
       [32mâœ“[39m renders custom use cases when provided[32m 60[2mms[22m[39m
[31m       [31mÃ—[31m renders icons for each use case[39m[32m 156[2mms[22m[39m
       [32mâœ“[39m renders all features for each use case[32m 38[2mms[22m[39m
[31m       [31mÃ—[31m has proper ARIA labels on section[39m[32m 204[2mms[22m[39m
[31m       [31mÃ—[31m has proper heading structure[39m[32m 240[2mms[22m[39m
       [32mâœ“[39m has unique IDs for each use case title[32m 192[2mms[22m[39m
       [32mâœ“[39m has proper list semantics for features[32m 168[2mms[22m[39m
       [32mâœ“[39m has aria-hidden on decorative icons[32m 123[2mms[22m[39m
       [32mâœ“[39m applies custom className when provided[32m 57[2mms[22m[39m
       [32mâœ“[39m has responsive grid classes[32m 86[2mms[22m[39m
[31m       [31mÃ—[31m applies card-feature styling to cards[39m[32m 75[2mms[22m[39m
[31m       [31mÃ—[31m renders scenario descriptions[39m[33m 395[2mms[22m[39m
       [32mâœ“[39m displays 'Key Features' label for each card[32m 104[2mms[22m[39m
       [32mâœ“[39m renders checkmark icons for features[32m 64[2mms[22m[39m
       [32mâœ“[39m DEFAULT_USE_CASES has 6 items[32m 1[2mms[22m[39m
       [32mâœ“[39m each default use case has required fields[32m 2[2mms[22m[39m
       [32mâœ“[39m default use cases have unique IDs[32m 1[2mms[22m[39m
       [32mâœ“[39m default use cases include expected personas[32m 2[2mms[22m[39m
       [32mâœ“[39m handles empty use cases array gracefully[32m 5[2mms[22m[39m
       [32mâœ“[39m renders grid with proper gap classes[32m 59[2mms[22m[39m
       [32mâœ“[39m each card has full height[32m 99[2mms[22m[39m
       [32mâœ“[39m accepts UseCase interface correctly[32m 57[2mms[22m[39m
 [32mâœ“[39m tests/unit/security/memory-wiper.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 89[2mms[22m[39m
[90mstderr[2m | tests/unit/api/send-share-email.test.ts[2m > [22m[2mSend Share Email API v1[2m > [22m[2mshould send share email successfully
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.
An error occurred

[90mstderr[2m | tests/unit/api/send-share-email.test.ts[2m > [22m[2mSend Share Email API v1[2m > [22m[2mshould include sender name in email
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.
An error occurred

[90mstderr[2m | tests/unit/api/send-share-email.test.ts[2m > [22m[2mSend Share Email API v1[2m > [22m[2mshould sanitize sender name to prevent XSS
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.
An error occurred

[90mstderr[2m | tests/unit/api/send-share-email.test.ts[2m > [22m[2mSend Share Email API v1[2m > [22m[2mshould handle email sending errors
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.
An error occurred

[90mstderr[2m | tests/unit/api/send-share-email.test.ts[2m > [22m[2mSend Share Email API v1[2m > [22m[2mshould format file sizes correctly
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.
An error occurred

 [31mâ¯[39m tests/unit/api/send-share-email.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 139[2mms[22m[39m
[31m     [31mÃ—[31m should send share email successfully[39m[32m 36[2mms[22m[39m
[31m     [31mÃ—[31m should include sender name in email[39m[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m should sanitize sender name to prevent XSS[39m[32m 5[2mms[22m[39m
     [32mâœ“[39m should reject missing email[32m 3[2mms[22m[39m
     [32mâœ“[39m should reject invalid email format[32m 34[2mms[22m[39m
     [32mâœ“[39m should reject missing shareId[32m 2[2mms[22m[39m
     [32mâœ“[39m should reject missing fileCount[32m 1[2mms[22m[39m
     [32mâœ“[39m should skip email when Resend is not configured[32m 2[2mms[22m[39m
     [32mâœ“[39m should respect CSRF protection[32m 3[2mms[22m[39m
     [32mâœ“[39m should respect rate limiting[32m 2[2mms[22m[39m
     [32mâœ“[39m should require API key authentication[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should handle email sending errors[39m[32m 9[2mms[22m[39m
[31m     [31mÃ—[31m should format file sizes correctly[39m[32m 4[2mms[22m[39m
 [32mâœ“[39m components/features/feature-filters.test.tsx [2m([22m[2m27 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [31mâ¯[39m tests/unit/crypto/pqc-lazy.test.ts [2m([22m[2m16 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 171[2mms[22m[39m
       [32mâœ“[39m should load PQC crypto on first use[32m 19[2mms[22m[39m
       [32mâœ“[39m should only load module once[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should preload module in background[39m[32m 21[2mms[22m[39m
         [32mâœ“[39m should generate hybrid keypair[32m 1[2mms[22m[39m
         [32mâœ“[39m should encapsulate[32m 2[2mms[22m[39m
         [32mâœ“[39m should decapsulate[32m 1[2mms[22m[39m
         [32mâœ“[39m should encrypt data[32m 33[2mms[22m[39m
         [32mâœ“[39m should decrypt data[32m 6[2mms[22m[39m
         [32mâœ“[39m should derive session keys after loading[32m 4[2mms[22m[39m
[31m         [31mÃ—[31m should throw error if sync method called before loading[39m[32m 13[2mms[22m[39m
         [32mâœ“[39m should generate random bytes after loading[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should preload all PQC modules[39m[32m 49[2mms[22m[39m
[31m       [31mÃ—[31m should check if PQC is ready[39m[32m 2[2mms[22m[39m
       [32mâœ“[39m should preload on mount with delay[32m 2[2mms[22m[39m
       [32mâœ“[39m should preload on hover[32m 1[2mms[22m[39m
       [32mâœ“[39m should lazy load file encryption module[32m 5[2mms[22m[39m
 [32mâœ“[39m tests/unit/components/file-selector.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [31mâ¯[39m tests/unit/privacy/video-metadata-stripper.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 40[2mms[22m[39m
       [32mâœ“[39m should support MP4 files[32m 4[2mms[22m[39m
       [32mâœ“[39m should support QuickTime files[32m 1[2mms[22m[39m
       [32mâœ“[39m should support M4V files[32m 0[2mms[22m[39m
       [32mâœ“[39m should create valid MP4 structure[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m should remove metadata boxes from MP4[39m[32m 13[2mms[22m[39m
       [32mâœ“[39m should preserve essential boxes[32m 2[2mms[22m[39m
       [32mâœ“[39m should handle corrupted MP4 gracefully[32m 1[2mms[22m[39m
       [32mâœ“[39m should extract GPS data from video if present[32m 1[2mms[22m[39m
       [32mâœ“[39m should strip metadata from MOV files[32m 1[2mms[22m[39m
       [32mâœ“[39m should strip metadata from multiple video files[32m 5[2mms[22m[39m
 [32mâœ“[39m tests/unit/components/transfer-queue.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[32m 22[2mms[22m[39m
[90mstderr[2m | tests/unit/hooks/use-service-worker.test.ts[2m > [22m[2museServiceWorker[2m > [22m[2mshould detect service worker support
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/api/stripe-webhook.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 40[2mms[22m[39m
[90mstderr[2m | tests/unit/hooks/use-service-worker.test.ts[2m > [22m[2museServiceWorker[2m > [22m[2mshould not register when service worker is not supported
[22m[39mAn error occurred

 [31mâ¯[39m tests/unit/hooks/use-service-worker.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 853[2mms[22m[39m
     [32mâœ“[39m should detect service worker support[32m 53[2mms[22m[39m
     [32mâœ“[39m should register service worker[32m 105[2mms[22m[39m
     [32mâœ“[39m should detect online/offline status[32m 200[2mms[22m[39m
     [32mâœ“[39m should handle service worker updates[32m 83[2mms[22m[39m
     [32mâœ“[39m should send CACHE_PQC_CHUNKS message on registration[32m 78[2mms[22m[39m
     [32mâœ“[39m should handle registration failure gracefully[32m 33[2mms[22m[39m
[31m     [31mÃ—[31m should not register when service worker is not supported[39m[32m 26[2mms[22m[39m
     [32mâœ“[39m should provide updateServiceWorker function[32m 85[2mms[22m[39m
     [32mâœ“[39m should provide clearCache function[32m 82[2mms[22m[39m
     [32mâœ“[39m should provide preloadPQCChunks function[32m 92[2mms[22m[39m
     [32mâœ“[39m should cleanup event listeners on unmount[32m 7[2mms[22m[39m
 [32mâœ“[39m tests/unit/components/interactive-tutorial.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 5527[2mms[22m[39m
       [33m[2mâœ“[22m[39m renders without crashing when forceShow is true [33m 357[2mms[22m[39m
       [33m[2mâœ“[22m[39m does not show tutorial if already completed [33m 1540[2mms[22m[39m
       [33m[2mâœ“[22m[39m shows tutorial for first-time users after delay [33m 1127[2mms[22m[39m
       [33m[2mâœ“[22m[39m shows "Done" button on last step [33m 524[2mms[22m[39m
       [33m[2mâœ“[22m[39m marks tutorial as completed when Done is clicked [33m 550[2mms[22m[39m
       [33m[2mâœ“[22m[39m calls onComplete when tutorial is completed [33m 473[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/digital-signatures.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 728[2mms[22m[39m
       [33m[2mâœ“[22m[39m should generate a signing keypair [33m 362[2mms[22m[39m
 [32mâœ“[39m tests/unit/chacha20-poly1305.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 15111[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle various data sizes [33m 14515[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle large data efficiently [33m 554[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/file-encryption.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 3270[2mms[22m[39m
       [33m[2mâœ“[22m[39m preserves large file content (multi-chunk) [33m 2829[2mms[22m[39m
 [32mâœ“[39m tests/unit/monitoring/metrics.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 120[2mms[22m[39m
 [32mâœ“[39m tests/unit/utils/fetch.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m tests/unit/api/auth.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m tests/unit/middleware/rate-limit.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 61[2mms[22m[39m
[90mstderr[2m | tests/unit/api/stripe-checkout.test.ts[2m > [22m[2mStripe Checkout API[2m > [22m[2mshould handle Stripe errors gracefully
[22m[39mAn error occurred

 [32mâœ“[39m tests/unit/api/stripe-checkout.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m tests/unit/transfer/encryption-chacha.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 13981[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle large data [33m 13939[2mms[22m[39m
 [31mâ¯[39m tests/unit/utils/secure-logger.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 45[2mms[22m[39m
[31m       [31mÃ—[31m should log messages in development[39m[32m 27[2mms[22m[39m
[31m       [31mÃ—[31m should warn messages in development[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should error messages in development[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should debug messages in development[39m[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should handle multiple arguments[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should not log messages in production[39m[32m 2[2mms[22m[39m
[31m       [31mÃ—[31m should not warn messages in production[39m[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should sanitize error messages in production[39m[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should not debug messages in production[39m[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/serialization.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 402[2mms[22m[39m
[90mstderr[2m | tests/unit/api/send-welcome.test.ts[2m > [22m[2mSend Welcome Email API[2m > [22m[2mshould send welcome email successfully
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.
An error occurred

 [31mâ¯[39m tests/unit/api/send-welcome.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 113[2mms[22m[39m
[31m     [31mÃ—[31m should send welcome email successfully[39m[32m 37[2mms[22m[39m
[31m     [31mÃ—[31m should reject request with missing email[39m[32m 8[2mms[22m[39m
     [32mâœ“[39m should reject request with invalid email format[32m 4[2mms[22m[39m
     [32mâœ“[39m should reject request with missing name[32m 39[2mms[22m[39m
[31m     [31mÃ—[31m should reject request when Resend is not configured[39m[32m 17[2mms[22m[39m
     [32mâœ“[39m should respect CSRF protection[32m 2[2mms[22m[39m
     [32mâœ“[39m should respect rate limiting[32m 1[2mms[22m[39m
     [32mâœ“[39m should require API key authentication[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/input-validation.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 288[2mms[22m[39m
 [31mâ¯[39m tests/unit/email/email-fallback-complete.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | tests/unit/security/csrf.test.ts[2m > [22m[2mCSRF Protection[2m > [22m[2mrequireCSRFToken[2m > [22m[2mshould reject requests without CSRF token
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/security/csrf.test.ts[2m > [22m[2mCSRF Protection[2m > [22m[2mrequireCSRFToken[2m > [22m[2mshould accept requests with valid CSRF token in header
[22m[39mAn error occurred

[90mstderr[2m | tests/unit/security/csrf.test.ts[2m > [22m[2mCSRF Protection[2m > [22m[2mrequireCSRFToken[2m > [22m[2mshould reject requests with mismatched tokens
[22m[39mAn error occurred

 [31mâ¯[39m tests/unit/security/csrf.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 83[2mms[22m[39m
       [32mâœ“[39m should generate a valid CSRF token[32m 20[2mms[22m[39m
       [32mâœ“[39m should generate unique tokens[32m 3[2mms[22m[39m
       [32mâœ“[39m should reject requests without CSRF token[32m 12[2mms[22m[39m
[31m       [31mÃ—[31m should accept requests with valid CSRF token in header[39m[32m 38[2mms[22m[39m
       [32mâœ“[39m should reject requests with mismatched tokens[32m 2[2mms[22m[39m
       [32mâœ“[39m should allow GET requests without CSRF token[32m 1[2mms[22m[39m
       [32mâœ“[39m should add CSRF token to request headers[32m 1[2mms[22m[39m
       [32mâœ“[39m should preserve existing headers[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/crypto/password-encryption.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 8144[2mms[22m[39m
       [33m[2mâœ“[22m[39m should derive a key from password and salt [33m 1422[2mms[22m[39m
       [33m[2mâœ“[22m[39m should derive different keys for different passwords [33m 2329[2mms[22m[39m
       [33m[2mâœ“[22m[39m should derive different keys for different salts [33m 1887[2mms[22m[39m
       [33m[2mâœ“[22m[39m should derive same key for same password and salt [33m 1937[2mms[22m[39m
       [33m[2mâœ“[22m[39m should support custom iterations [33m 548[2mms[22m[39m
Error: Failed to execute 'startTask()' on 'AsyncTaskManager': The asynchronous task manager has been destroyed. This error can be thrown if scripts continue to run while a browser frame is closed.
    at AsyncTaskManager.startTask (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:153:19)
    at file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/fetch/Fetch.js:416:80
    at new Promise (<anonymous>)
    at Fetch.sendRequest (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/fetch/Fetch.js:415:16)
    at Fetch.send (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/fetch/Fetch.js:188:27)
    at Function.navigate (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/browser/utilities/BrowserFrameNavigator.js:202:24)
 [31mâ¯[39m tests/unit/chat-security.test.ts [2m([22m[2m33 tests[22m[2m | [22m[31m15 failed[39m[2m)[22m[33m 130401[2mms[22m[39m
[31m       [31mÃ—[31m should generate valid HMAC signature for outgoing messages[39m[33m 10025[2mms[22m[39m
[31m       [31mÃ—[31m should include sequence number in HMAC signature[39m[33m 10017[2mms[22m[39m
[31m       [31mÃ—[31m should reject message with invalid HMAC[39m[33m 10020[2mms[22m[39m
[31m       [31mÃ—[31m should reject message with modified ciphertext[39m[33m 10007[2mms[22m[39m
[31m       [31mÃ—[31m should verify HMAC before AES-GCM decryption[39m[33m 10058[2mms[22m[39m
[31m       [31mÃ—[31m should assign monotonically increasing sequence numbers[39m[33m 10005[2mms[22m[39m
[31m       [31mÃ—[31m should accept first message from peer[39m[33m 10011[2mms[22m[39m
[31m       [31mÃ—[31m should reject duplicate sequence numbers[39m[33m 10011[2mms[22m[39m
[31m       [31mÃ—[31m should reject old sequence numbers[39m[33m 10009[2mms[22m[39m
[31m       [31mÃ—[31m should reject large sequence gaps[39m[33m 10015[2mms[22m[39m
[31m       [31mÃ—[31m should allow reasonable sequence gaps[39m[33m 10005[2mms[22m[39m
[31m       [31mÃ—[31m should reset sequence numbers on new session[39m[33m 10009[2mms[22m[39m
[31m       [31mÃ—[31m should clear sequence state on destroy[39m[33m 10015[2mms[22m[39m
       [32mâœ“[39m should strip script tags[32m 20[2mms[22m[39m
       [32mâœ“[39m should strip event handlers[32m 10[2mms[22m[39m
       [32mâœ“[39m should block javascript: URLs[32m 6[2mms[22m[39m
       [32mâœ“[39m should preserve safe HTML tags[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should preserve safe links[39m[32m 17[2mms[22m[39m
       [32mâœ“[39m should strip dangerous tags[32m 96[2mms[22m[39m
[31m       [31mÃ—[31m should handle nested XSS attempts[39m[32m 6[2mms[22m[39m
       [32mâœ“[39m should handle encoded XSS attempts[32m 1[2mms[22m[39m
       [32mâœ“[39m should format bold markdown[32m 2[2mms[22m[39m
       [32mâœ“[39m should format italic markdown[32m 2[2mms[22m[39m
       [32mâœ“[39m should format code markdown[32m 2[2mms[22m[39m
       [32mâœ“[39m should format markdown links[32m 2[2mms[22m[39m
       [32mâœ“[39m should prevent XSS in markdown[32m 1[2mms[22m[39m
       [32mâœ“[39m should prevent XSS in markdown links[32m 2[2mms[22m[39m
     [32mâœ“[39m should apply all security layers in correct order[32m 1[2mms[22m[39m
     [32mâœ“[39m should prevent replay attacks with tampered HMAC[32m 0[2mms[22m[39m
     [32mâœ“[39m should handle concurrent messages correctly[32m 0[2mms[22m[39m
     [32mâœ“[39m should add minimal overhead for HMAC[32m 0[2mms[22m[39m
     [32mâœ“[39m should add minimal overhead for sequence check[32m 0[2mms[22m[39m
     [32mâœ“[39m should add minimal overhead for XSS sanitization[32m 10[2mms[22m[39m
DOMException [AbortError]: The operation was aborted.
    at Fetch.onAsyncTaskManagerAbort (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/fetch/Fetch.js:546:23)
    at Object.<anonymous> (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/fetch/Fetch.js:416:101)
    at AsyncTaskManager.abortAll (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:292:30)
    at AsyncTaskManager.abort (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:52:21)
    at DetachedBrowserFrame.abort (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/browser/detached-browser/DetachedBrowserFrame.js:112:58)
    at file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/browser/detached-browser/DetachedBrowserFrame.js:117:39
    at Array.map (<anonymous>)
    at file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/browser/detached-browser/DetachedBrowserFrame.js:117:18
    at new Promise (<anonymous>)
    at DetachedBrowserFrame.abort (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/browser/detached-browser/DetachedBrowserFrame.js:114:16)
DOMException [NetworkError]: Failed to execute "fetch()" on "Window" with URL "http://localhost:3000/evil.com": The operation was aborted.
    at Fetch.onError (file:///C:/Users/aamir/Documents/Apps/Tallow/node_modules/happy-dom/lib/fetch/Fetch.js:540:21)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:107:11)
    at Socket.socketErrorListener (node:_http_client:574:5)
    at Socket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at processTicksAndRejections (node:internal/process/task_queues:90:21)
